
## 문제

종목에 대한 검색요청 시 매 input에 새로운 value가 들어올때마다 사용되지않는 이전 값들이 inactive 되어있는 상태의 쿼리로 캐싱되어있으므로 사용자가 많거나 검색어가 빠르게 변할 때, 혹은 그 둘 다일 경우 메모리 누수가 생길 확률이 높아진다. ex) 현재 input창에 '삼성전자'가 입력되어있다면 입력되기까지에 값들인 'ㅅ', '사', '삼', '삼ㅅ' 분리된 검색어들이 inactive된 상태로 캐시되어있다. 

*그렇다면 TanStack Qeury가 inactive된 value들을 알아서 처리해주는가?

그렇다. inactive된 쿼리는 일정 시간이 지난 후 자동으로 가비지 컬렉션될 수 있도록 `gcTime` 이라는 설정을 제공한다. `gcTime`은 쿼리가 비활성 상태로 남아있는 시간을 정의하며, 이 시간이 지나면 쿼리 결과가 메모리에서 제거된다. 기본값은 5분이다. 하지만 사용자가 연속해서 많은 수의 쿼리를 생성하는 경우, 가비지 컬렉션이 발생하기 전에 많은 양의 메모리를 사용할 수 있으며, 이는 성능 저하나 메모리 누수로 이어질 수 있다. 이를 방지하기 위한 방법은 무엇일까?

### 해결방안 
- 1. 디바운스 적용
- gc 
- 
문자로 새로운 쿼리를 입력할 때 이전 검색어들은 inactive한 상태로 바뀐다 gcTime이 끝나기전에 같은 inactive된 문자와 같은 문자로 검색했을 때
1. inactive한 쿼리의 값을 다시 active하게 만들어서 사용하는지 -> 캐싱된 값을 사용하는 것인지 + 캐싱이 되고 있는지
2. 기존의 inactive한 쿼리를 삭제하고 같은 문자로 들어온 문자로 새로운 쿼리를  만들어서 네트워크 요청이 진행되는지

### search바에서의 staleTime과 gcTime에 대한 고민

- search바의 데이터 자체가 변동 확률이 극히 적은 값들이라 staleTime을 여유있게 가져가는 방식을 채택
- gcTime은 staleTime과 같게 설정해준다.
