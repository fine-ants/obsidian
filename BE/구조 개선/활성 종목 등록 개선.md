
## 현재 방식
종목의 현재가와 관련된 API 호출시 컨트롤러 레이어에서 활성 종목을 등록하는 비동기 이벤트를 발행합니다.
```java
// 포트폴리오 목록 조회  
@GetMapping  
public ApiResponse<PortfoliosResponse> searchMyAllPortfolios(  
    @MemberAuthenticationPrincipal MemberAuthentication authentication) {  
    // 활성 종목 등록  
    Set<String> tickers = portFolioService.getAllPortfolioTickers(authentication.getId());  
    eventPublisher.publishEvent(new StocksViewedEvent(tickers));  
  
    return ApiResponse.success(PortfolioSuccessCode.OK_SEARCH_PORTFOLIOS,  
       portFolioService.readMyAllPortfolio(authentication.getId()));  
}
```


## 현재 방식의 문제점
현재 위와 같은 활성 종목을 등록하는 코드들이 9개 정도 존재하고, 비슷하게 중복되어 있습니다. 각각의 API별로 조금씩은 다르지만 핵심은 API와 관련된 종목의 티커 심볼을 조회한 다음에 이벤트를 발행하는 것은 동일합니다. 즉, 활성 종목을 등록하는 코드가 중복되어 있다는 문제점을 가지고 있습니다. 