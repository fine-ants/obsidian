
### 전체 아키텍처
![](refImg/Pasted%20image%2020260214155454.png)
### 문제 원인
- 캐시 저장소에 저장되어 있는 종목 현재가 데이터를 접근시 장시간 외에서는 별도의 현재가 갱신을 하지 않음
- 만약 장시간 동안 종목의 현재가가 갱신되지 않으면 정확하지 않은 현재가 데이터가 유지됨
- 장시간 외의 시간에서 클라이언트가 종목 현재가를 접근시 정확하지 않은 데이터를 제공할 수 있음
### 해결과정
- 평일 장시간이 종료 직후인 15시 30분에 작동하는 스케줄러 구현
- 스케줄러는 Redis 캐시 저장소에 저장되어 있는 모든 종목을 가져온 다음에 최신 현재가로 갱신함
- 종목 현재가 갱신은 비동기 이벤트를 발행하여 비동기적으로 수행됨
### 결과
- 사용자는 장시간이 끝난 이후에 최신 종목 현재가를 받을 수 있음
- 서버의 입장에서는 장시간이 끝났음에도 최신 현재가를 제공할 수 있음
- 서버는 장시간 외에서 별도의 외부 API를 통해서 불필요하게 요청할 필요없음

