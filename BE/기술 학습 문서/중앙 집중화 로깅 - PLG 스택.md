## 중앙 집중화 로깅의 필요성
### 기존 로그 수집 방식의 문제점
#### 1. 로그 확인의 불편함
기존까지는 도커 컨테이너 위에서 실행중인 서버가 생성하는 로그를 확인하기 위해서는 사용자가 직접 해당 컨테이너로 직접 접속해서 확인하고 있습니다. 다음 화면은 docker 명령어를 이용해서 fineAnts_app 컨테이너에 쉘 접속해서 로그를 확인하는 모습입니다.
![[Pasted image 20250109121655.png]]

#### 2. 분산 환경에서의 문제
만약 현재 EC2 인스턴스만이 아닌 추가적인 EC2 인스턴스를 추가하여 스케일 아웃하게 되면 각각의 서버에서 생성하는 로그를 확인하기 어려워 집니다. 이는 첫번째 문제점으로도 이어집니다.

#### 3. 로그 저장 문제
각각의 서버에서 생성된 로그를 어딘가에 저장해야 하는데, 운용하는 서버가 많아지면 많아질수록 로그를 저장하는데 불편합니다.

위와 같은 문제점을 해결하기 위해서는 중앙 집중화 로깅 솔루션이 필요합니다. 해당 솔루션은 각각의 서버에서 발생하는 로그들을 수집한 다음에 어떤 한 저장소에 저장하고 대시보드와 같은 시각화 도구를 이용해서 모니터링하는 솔루션입니다.
![[Pasted image 20250109122155.png]]

## 다양한 중앙 집중화 로깅 솔루션
중앙 집중화 로깅 솔루션은 크게 3가지가 존재합니다.
1. AWS CloudWatch
	- AWS EC2와 연계가 쉽지만 요금이 발생합니다.
2. ELK(Elatic Search + Logstash + Kibana)
	- 강력한 검색 및 쿼리 기능을 제공
	- 무겁고 러닝 커브와 구축 및 운영 리소스가 있습니다.
3. PLG(Promtail + Loki + Grafana)
	- 대규모 데이터 처리는 ELK에 비해서 부족하지만 비교적 가볍고 설정이 어렵지 않고 요구되는 리소스가 적습니다.

이 글에서는 PLG 스택을 이용해서 중앙 집중화 로깅 솔루션을 구현합니다.

## PLG 스택
![[Pasted image 20250109122752.png]]
### Promtail: 로그 수집
- 서버 및 애플리케이션에서 발생한 로그를 수집하고 Grafana Loki에게 전송
- 

## Grafana & Loki 환경 구성
## Promtail 환경 구성
## 라벨링을 위한 로그 메시지 수정
## Grafana 대시보드 구성
