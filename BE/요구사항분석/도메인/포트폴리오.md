
- [[#포트폴리오 추가|포트폴리오 추가]]
	- [[#포트폴리오 추가#기능 설명|기능 설명]]
	- [[#포트폴리오 추가#입력 정보|입력 정보]]
	- [[#포트폴리오 추가#제약 사항|제약 사항]]
	- [[#포트폴리오 추가#예외 처리|예외 처리]]
	- [[#포트폴리오 추가#데이터 검증|데이터 검증]]
- [[#포트폴리오 목록 조회|포트폴리오 목록 조회]]
- [[#포트폴리오 수정|포트폴리오 수정]]
- [[#포트폴리오 삭제|포트폴리오 삭제]]
- [[#포트폴리오 다수 삭제|포트폴리오 다수 삭제]]
- [[#포트폴리오 차트 조회|포트폴리오 차트 조회]]
	- [[#포트폴리오 차트 조회#파이 차트|파이 차트]]
	- [[#포트폴리오 차트 조회#배당금 차트|배당금 차트]]
	- [[#포트폴리오 차트 조회#섹터 차트|섹터 차트]]
- [[#포트폴리오 활성 알림 목록 조회|포트폴리오 활성 알림 목록 조회]]
- [[#포트폴리오 목표 수익률 도달 알림 설정|포트폴리오 목표 수익률 도달 알림 설정]]
- [[#포트폴리오 최대 손실율 도달 알림 설정|포트폴리오 최대 손실율 도달 알림 설정]]
- [[#포트폴리오 알림 수정|포트폴리오 알림 수정]]
- [[#포트폴리오 알림|포트폴리오 알림]]
- [[#포트폴리오 알림#포트폴리오 목표 수익률 도달 알림|포트폴리오 목표 수익률 도달 알림]]
- [[#포트폴리오 알림#포트폴리오 최대 손실율 도달 알림|포트폴리오 최대 손실율 도달 알림]]


### 포트폴리오 추가
#### 기능 설명
사용자는 포트폴리오 이름, 증권사, 예산, 목표수익금액, 최대 손실 금액을 입력하여 포트폴리오를 추가합니다.
#### 입력 정보
- 필수 입력 정보
	- 이름: 포트폴리오의 고유한 이름
	- 증권사: 포트폴리오와 연계된  증권사 이름
- 선택 입력 정보
	- 예산: 포트폴리오에 추가할 예정인 총 금액
	- 목표 수익 금액: 포트폴리오에서 기대하는 수익 금액
	- 최대 손실 금액: 허용 가능한 최대 손실 금액
#### 제약 사항
- 이름
	- 포트폴리오의 이름은 공백이면 안되고, 공백으로 시작해도 안되고, 특수문자가 들어있으면 안됩니다.
	- 한글 또는 영문으로 최대 100자리여야 합니다.
- 예산
	- 0 이상의 값이 저장되어야 합니다
- 목표 수익 금액
	- 0 이상의 값이 저장되어야 합니다
	- 예산의 값이 0보다 큰 경우 목표 수익 금액은 예산 금액보다 커야 합니다
- 최대 손실 금액
	- 0 이상의 값이 저장되어야 합니다.
	- 예산의 값이 0보다 큰 경우 최대 손실 금액은 예산 금액보다 작아야 합니다.
#### 예외 처리
- 예산이 0원인 경우 목표 수익 금액과 최대 손실 금액에 대한 제약 조건을 검증하지 않습니다.
- 목표 수익금액 또는 최대 손실 금액이 0원인 경우 해당 금액에 대한 제약 조건은 수행되지 않습니다.
	- 예를 들어 예산: 100만원, 목표 수익 금액: 0원, 최대 손실 금액: 90만원인 경우 목표 수익 금액에 대한 검증은 생략하고 최대 손실 금액에 대해서만 제약 조건을 수행합니다.
#### 데이터 검증
- 예산, 목표 수익 금액, 최대 손실 금액은 0포함 양수값이어야 합니다.



### 포트폴리오 목록 조회
- 사용자는 자신이 가지고 있는 포트폴리오들을 조회할 수 있습니다.
- 서버는 클라이언트에게 포트폴리오 리스트를 응답해야 합니다.
- 포트폴리오 응답 구성
	- 포트폴리오 등록번호(id)
	- 증권사(securityFirm)
	- 이름(name)
	- 예산(budget)
	- 총손익(totalGain)
	- 총손익율(totalGainRate)
	- 일일손익(dailyGain)
	- 일일손익율(dailyGainRate)
	- 현재평가금액(currentValuation)
	- 예상월배당금(expectedMonthlyDividend)
	- 주식개수(numShares)
	- 생성일자(dateCreated)
- 정렬기준
	1. 포트폴리오 등록번호 내림차순

### 포트폴리오 수정
- 사용자는 자신의 특정 포트폴리오의 정보를 수정할 수 있습니다.
	- 이름, 증권사, 예산, 목표수익금액, 최대손실금액
- 예산, 목표수익금액, 최대손실금액간에 관계의 제약조건은 포트폴리오 추가의 요구사항과 동일합니다.

### 포트폴리오 삭제
- 사용자는 포트폴리오 페이지에서 해당 포트폴리오를 삭제할 수 있습니다.
- 사용자는 다른 사용자의 포트폴리오를 삭제할 수 없어야 합니다.

### 포트폴리오 다수 삭제
- 사용자는 포트폴리오 목록 페이지에서 다수의 포트폴리오를 삭제할 수 있습니다.
- 사용자는 다른 사용자의 포트폴리오를 삭제할 수 없어야 합니다.

### 포트폴리오 차트 조회
- 사용자는 한 포트폴리오의 종목에 대한 파이 차트, 배당금 차트, 섹터 차트를 조회합니다.
#### 파이 차트
- 파이 차트 구성
	- 종목 이름
	- 평가 금액
	- 비중
	- 총 손익
	- 총 손익율
- 파이 차트에는 현금이 포함되어 있습니다.
	- 현금은 예산에서 총 투자 금액을 차감한 금액입니다.
- 파이 차트 정렬 기준 (내림차순)
	- 평가 금액 (valuation)
	- 총 손익 (totalGain)

#### 배당금 차트
- 배당금 차트 구성
	- 월
	- 해당 월에 받을 수 있는 종목들의 예상 배당금 합계
- 배당금 차트 정렬 기준
	- 월 오름차순

#### 섹터 차트
- 섹터 차트 구성
	- 섹터 이름
	- 비중
- 섹터 차트에는 현금이 포함되어 있습니다.
- 섹터 차트 정렬 기준
	- 비중 (내림차순)
	- 섹터 이름

### 포트폴리오 활성 알림 목록 조회
- 사용자는 포트폴리오에 설정되어 있는 알림 설정을 조회할 수 있습니다.
- 응답 정보
	- 포트폴리오 등록번호(portfolioId)
	- 증권사(securitiesFirm)
	- 이름(name)
	- 목표수익금액 알림여부(targetGainNotify)
	- 최대손실금액 알림여부(maxLossNotify)
	- 목표수익금액 설정 여부(isTargetGainSet)
	- 최대손실금액 설정 여부(isMaxLossSet)
	- 생성일자(createdAt)

### 포트폴리오 목표 수익률 도달 알림 설정
- 사용자는 특정한 포트폴리오의 목표 수익 알림 설정을 할 수 있습니다.
- 입력 정보
	- 활성화 여부(isActive)

### 포트폴리오 최대 손실율 도달 알림 설정
- 사용자는 특정한 포트폴리오의 최대 손실 알림 설정을 할 수 있습니다.
- 입력 정보
	- 활성화 여부(isActive)

### 포트폴리오 알림 수정
- 사용자는 각각의 포트폴리오의 목표수익금액/최대손실금액에 대한 활성화 알림을 수정할 수 있습니다.
- 사용자의 한 포트폴리오의 목표수익금액이나 최대손실금액이 0원인 경우 사용자는 해당 알림을 수정할 수 없습니다.

## 포트폴리오 알림

### 포트폴리오 목표 수익률 도달 알림
- 관리자는 모든 포트폴리오를 대상으로 목표 수익율을 만족하는 것들을 대상으로 알림을 전송합니다.
- 제약 조건
	- 포트폴리오의 목표 수익율 알림 활성화
	- 사용자 계정의 전체 포트폴리오 목표 수익율 알림 활성화
	- 포트폴리오의 목표 수익율 도달
- 응답 정보
	- 알림 등록 번호(notificationId)
	- 알림 읽음 여부(isRead)
	- 제목(title)
	- 내용(content)
	- 종류(type)
	- 참조 아이디(referenceId)
	- 회원 등록번호(memberId)
	- 링크(link)
	- 메시지 등록번호(messageId)
	- 포트폴리오 이름(name)

### 포트폴리오 최대 손실율 도달 알림
- 관리자는 모든 포트폴리오를 대상으로 최대 손실율을 만족하는 것들을 대상으로 알림을 전송합니다.
- 제약 조건
	- 포트폴리오의 최대 손실율 알림 활성화
	- 사용자 계정의 전체 포트폴리오 최대 손실율 알림 활성화
	- 포트폴리오의 최대 손실율 도달
- 응답 정보
	- 알림 등록 번호(notificationId)
	- 알림 읽음 여부(isRead)
	- 제목(title)
	- 내용(content)
	- 종류(type)
	- 참조 아이디(referenceId)
	- 회원 등록번호(memberId)
	- 링크(link)
	- 메시지 등록번호(messageId)
	- 포트폴리오 이름(name)