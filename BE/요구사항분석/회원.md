
- [[#일반 회원가입|일반 회원가입]]
- [[#프로필 수정|프로필 수정]]
	- [[#프로필 수정#프로필 수정시 기본 프로필 파일로 변경|프로필 수정시 기본 프로필 파일로 변경]]
	- [[#프로필 수정#프로필 수정시 새로운 프로필 파일로 변경|프로필 수정시 새로운 프로필 파일로 변경]]
	- [[#프로필 수정#프로필 수정시 기존 프로필 사진으로 유지|프로필 수정시 기존 프로필 사진으로 유지]]


## 일반 회원가입
- 사용자는 닉네임, 이메일, 비밀번호, 프로필 사진을 입력하여 일반 회원가입 할 수 있습니다.
- 닉네임은 고유해야합니다.
- 이메일은 로컬 회원상에서는 고유해야 합니다.
- 프로필 사진의 최대 크기는 10MB 이하여야 합니다.
- 클라이언트는 프로필 사진을 전달하기 위해서 다음과 같이 수행합니다.
	- 클라이언트는 기본 프로필 사진으로 설정하기 위해서는 profileImageFile 프로퍼티를 포함하지 않습니다.
	- 클라이언트는 새로운 프로필 사진으로 설정하기 위해서는 profileImageFile 프로퍼티에 새로운 프로필 사진을 업로드하여 전송합니다.

## 프로필 수정
- 사용자는 회원 정보인 닉네임과 프로필 사진을 변경할 수 있습니다.
- 클라이언트는 form-data 형식으로 프로필 파일과 닉네임을 전달하여 프로필 수정을 요청합니다.
	- 클라이언트는 profileImageFile과 profileInformation을 포함하거나 포함하지 않을 수 있습니다.
	- profileInformation에는 nickname이 존재합니다.
- 클라이언트가 프로필 파일을 전송하는 경우들은 다음과 같습니다.
	- [[#프로필 수정시 기본 프로필 파일로 변경]]
	- [[#프로필 수정시 새로운 프로필 파일로 변경]]
	- [[#프로필 수정시 기존 프로필 사진으로 유지]]
- 프로필 수정시 프로필 사진의 최대 크기는 10MB 이하여야 합니다.
- 프로필 수정시 닉네임이 중복되면 안됩니다. (회원 본인 것을 제외한 닉네임에서 중복 검사)

### 프로필 수정시 기본 프로필 파일로 변경
- 서버는 클라이언트로부터 다음과 같이 전송받습니다.
	- profileImageFile : 빈 파일
- 서버는 기본 프로필 파일로 변경하기 위해서 다음과 같이 수행합니다.
	- 회원의 profileUrl 값을 이용하여 null이 아니라면 s3에 저장된 프로필 사진을 삭제합니다.
	- 회원의 profileUrl 값을 null로 저장합니다.

### 프로필 수정시 새로운 프로필 파일로 변경
- 서버는 클라이언트로부터 다음과 같이 전송받습니다.
	- profileImageFile : 새로운 프로필 파일
- 서버는 새로운 프로필 파일로 변경하기 위해서 다음과 같이 수행합니다.
	- 회원의 profileUrl 값을 이용해서 s3에 저장된 이미지 파일을 삭제한다
	- profileImageFile로 전달받은 이미지 파일로 s3에 새로운 프로필 사진을 등록합니다.
	- 회원의 profileUrl 값을 s3에 새로 업로드한 프로필 사진의 URL을 저장합니다.

### 프로필 수정시 기존 프로필 사진으로 유지
- 서버는 클라이언트로부터 다음과 같이 전송받습니다.
	- profileImageFile : 프로퍼티 자체를 포함하지 않음
- 서버는 기존 프로필 사진으로 유지하기 위해서 다음과 같이 수행합니다.
	- 서버는 profileImageFile이 empty하기 때문에 별도의 수행을 하지 않는다.

프로필 수정시 3가지 경우를 표로 정리하면 다음과 같습니다. 표에서

| property         | 기본 프로필 사진 변경 | 새로운 프로필 사진 변경 | 기존 프로필 사진 유지 |
| ---------------- | ------------ | ------------- | ------------ |
| profileImageFile | empty File   | File          | 프로퍼티 포함 x    |

